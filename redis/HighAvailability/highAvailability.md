## 高可用性
### 主从复制
![img.png](imgs%2Fimg.png)

- 命令传播
  - 主从服务器在完成第一次同步之后，双方维持一个**TCP长连接**，后续通过这个连接将写操作命令传播给从服务器
- 分摊主服务器的压力
  - 当从服务器太多时，可以指定从服务器经理，分担生成RDB和传输RDB的压力
- 增量复制
  - repl_backlog_buffer：环形缓冲区，用于主从服务器断开连接后，从中找到差异的数据
  - replication offset: 标记缓冲区的同步进度，通过主从服务器的标记来确定增量数据是否仍在缓冲区中来判断继续执行什么操作
    - 增量同步
    - 全量同步

![img_1.png](imgs%2Fimg_1.png)
### 哨兵机制
![img_2.png](imgs%2Fimg_2.png)

